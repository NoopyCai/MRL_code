<!-- Top Button -->

<div class="top-btn-div">
  <a href="#" class="top-btn size14pt">&#8593;</a>
</div>
<script>
  (function () {
    const currentURL = window.location.pathname;
    const pageType = document.querySelector(".ga-page")?.value;
    // if (currentURL.includes('pay.mrliving.com.tw') || currentURL === "/") {
    //     return;
    // };

    if (!currentURL.includes('blog') && pageType !== "product" && !currentURL.includes('homecard')) {
      return;
    }


    document.addEventListener('DOMContentLoaded', function () {
      const scrollThreshold = 50;
      const topBtn = document.querySelector('.top-btn-div');
      let lastScrollTop = 0;

      window.addEventListener('scroll', function () {
        const scrollVal = window.scrollY;
        const scrollDifference = scrollVal - lastScrollTop;

        // 在最頂端時不顯示
        if (scrollVal === 0) {
          topBtn.classList.remove("active");
        }
        // 向上滑動時顯示
        if (scrollDifference < -scrollThreshold) {
          topBtn.classList.add("active");
        } 
        // 向下滑動時隐藏
        else if (scrollDifference > 0) {
          topBtn.classList.remove("active");
        }

        lastScrollTop = scrollVal;
      });

      topBtn.addEventListener('click', function (e) {
        e.target.blur();
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    });
  })();
</script>
<style>
  .top-btn {
    font-weight: bolder;
    text-decoration: none;
    line-height: 44px;
    height: 50px;
    width: 50px;
    height: 50px;
    font-size: 28px;
    margin: 5px;
    color: #000 !important;
    border: 1px solid;
    border-radius: 50%;
    background-color: #ffffff40;
    display: inline-block;
    text-align: center;
    font-family: 'Noto Sans TC', sans-serif;
  }

  .top-btn-div {
    cursor: pointer;
    display: block;
    width: 60px;
    top: unset;
    bottom: 225px;
    right: 10px;
    position: fixed;
    z-index: 1000;
    transform: translateX(200%);
    transition: transform 0.2s ease-in-out;
    -webkit-user-select: none; 
    -webkit-tap-highlight-color: transparent; 
  }

  .top-btn-div.active {
    display: block;
    transform: translateX(0);
    transition: transform 0.2s ease-in-out;
  }

  .top-btn:hover {
    text-decoration: none;
  }